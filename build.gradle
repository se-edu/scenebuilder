import org.apache.tools.ant.filters.EscapeUnicode

apply plugin: 'java'
apply plugin: 'application'

repositories {
    mavenCentral()
}

dependencies {
    testCompile 'junit:junit:4.12'
    testCompile 'org.assertj:assertj-core:3.2.0'
}

version = '8.0.0'
mainClassName = 'com.oracle.javafx.scenebuilder.app.SceneBuilderApp'
ext.buildDateFormat = version.endsWith('-SNAPSHOT') ? 'yyyy-MM-dd HH:mm:ss' : 'yyyy-MM-dd'

processResources {
    def buildDate = new Date().format(buildDateFormat)
    from ('src/main/resources') {
        include '**/*.properties'
        expand([
            version: version,
            javaVersion: System.getProperty('java.runtime.version') + ', ' + System.getProperty('java.vendor'),
            buildDate: buildDate,
            mainClassName: mainClassName
        ])
        filter(EscapeUnicode)
    }
    into buildDir
}

jar {
    manifest {
        attributes 'Main-Class': mainClassName
    }
}

task kitJar(type: Jar) {
    baseName = "SceneBuilderKit"
    from (sourceSets.main.output) {
        include "com/oracle/javafx/scenebuilder/kit/**/*"
    }
}
